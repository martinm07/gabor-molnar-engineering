import{b as dt,s as Kt,p as xt,a as ft,U as gt,E as Qt,d as Gt,c as Xt,e as Yt,n as F,i as $t,f as Lt,g as te,r as ee,h as Tt,j as yt,u as D,k as ae,l as ne,m as re,o as se,q as oe,T as ie,t as C,v as O,w as le,x as J,y,z as K,A as N,B as P,C as i,D as V,F as H,G as B,H as X,I as G,J as $,K as wt,L as kt,M as ue,N as ce}from"../../shared/js/svelte-Dn3LxMab.js";import{s as It,h as de,c as Nt,o as rt,b as at,p as W,r as Ot,a as ct,i as z,d as et,e as fe,f as Vt,g as jt,j as ve,k as At}from"../../shared/js/index-client-ye65gFmA.js";import{f as it,r as me,t as pe,s as ge,a as Et}from"../../shared/js/helper-BdH2pwvn.js";/* empty css                               */import{s as nt,a as Ct,b as be,c as he}from"../../shared/js/attributes-DIkj7TX0.js";import{b as _e}from"../../shared/js/input-DQmmrUAU.js";/* empty css                          */function xe(e,t,n){let a=gt,r;dt(()=>{Kt(a,a=t())&&(r&&xt(r),r=ft(()=>n(e)))})}function bt(e,t,...n){var a,r;dt(()=>{a!==(a=e())&&(r&&(Gt(r),r=null),a&&(r=ft(()=>a(t,...n))))},Qt)}function ye(e,t){let n,a;dt(()=>{n!==(n=e())&&(a&&(xt(a),a=null),n&&(a=ft(()=>t(n))))})}function we(e,t,n){const a=e.dom;if($t(a)){for(let r=0;r<a.length;r++)if(a[r]===t){a[r]=n;break}}else a===t&&(e.dom=n)}function ke(e,t,n,a,r,c){let f,o,d=null,s=e,g,m=Nt;dt(()=>{const w=Lt,l=t()||null,u=l==="svg"?te:null;if(l!==f){var _=Nt;return It(m),g&&(l===null?xt(g,()=>{g=null,o=null,d==null||d.remove()}):l===o?ee(g):(Gt(g),Tt(!1))),l&&l!==o&&(g=ft(()=>{const v=d;if(d=u?document.createElementNS(u,l):document.createElement(l),v&&!de?(we(w,v,d),v.remove()):Xt(d,w),a){var h=d.appendChild(Yt());a(d,h)}return s.before(d),F})),f=l,f&&(o=f),Tt(!0),It(_),F}})}function ht(e,t,n){yt(()=>{var a=D(()=>t(e,n==null?void 0:n())||{});if(n&&(a!=null&&a.update)){var r=!1;ae(()=>{var c=n();ne(c),r&&a.update(c)}),r=!0}if(a!=null&&a.destroy)return()=>a.destroy()})}const Dt=typeof window<"u",Ee=Dt?requestAnimationFrame:F,Ce=Dt?()=>performance.now():()=>Date.now(),Z={tick:e=>Ee(e),now:()=>Ce(),tasks:new Set};function Rt(e){Z.tasks.forEach(t=>{t.c(e)||(Z.tasks.delete(t),t.f())}),Z.tasks.size!==0&&Z.tick(Rt)}function Se(e){let t;return Z.tasks.size===0&&Z.tick(Rt),{promise:new Promise(n=>{Z.tasks.add(t={c:e,f:n})}),abort(){Z.tasks.delete(t)}}}function Ft(e,t){e.dispatchEvent(new CustomEvent(t))}function Me(e){const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Pe(e){const t={},n=e.split(";");for(const a of n){const[r,c]=a.split(":");if(!r||c===void 0)break;const f=Me(r.trim());t[f]=c.trim()}return t}const Te=e=>e;function Ie(e,t,n,a){var r=(e&ie)!==0,c="in",f,o=t.inert,d,s;function g(){return f??(f=n()(t,a==null?void 0:a(),{direction:c}))}var m={is_global:r,in(){t.inert=o,Ft(t,"introstart"),d=zt(t,g(),s,1,()=>{Ft(t,"introend"),d=f=void 0})},out(l){l==null||l()},stop:()=>{d==null||d.abort()}},w=Lt;(w.transitions??(w.transitions=[])).push(m),re&&yt(()=>{D(()=>m.in())})}function zt(e,t,n,a,r){if(se(t)){var c;return oe(()=>{var k=t({direction:"in"});c=zt(e,k,n,a,r)}),{abort:()=>c.abort(),deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:k=>c.t(k)}}if(!(t!=null&&t.duration))return r==null||r(),{abort:F,deactivate:F,reset:F,t:()=>a};var{delay:f=0,duration:o,css:d,tick:s,easing:g=Te}=t,m=Z.now()+f,w=1-a,l=a-w;o*=Math.abs(l);var u=m+o,_,v;if(d){for(var h=[],j=Math.ceil(o/16.666666666666668),b=0;b<=j;b+=1){var p=w+l*g(b/j),S=d(p,1-p);h.push(Pe(S))}_=e.animate(h,{delay:f,duration:o,easing:"linear",fill:"forwards"}),_.finished.then(()=>{r==null||r(),_.cancel()}).catch(k=>{if(_.startTime!==null&&_.currentTime!==null)throw k})}else s==null||s(0,1),v=Se(k=>{if(k>=u)return s==null||s(a,1-a),r==null||r(),!1;if(k>=m){var I=w+l*g((k-m)/o);s==null||s(I,1-I)}return!0});return{abort:()=>{_==null||_.cancel(),v==null||v.abort()},deactivate:()=>{r=void 0},reset:()=>{},t:k=>{var I=w+l*g((k-m)/o);return Math.min(1,Math.max(0,I))}}}function Bt(e,t,n){if(e==null)return t(void 0),F;const a=e.subscribe(t,n);return a.unsubscribe?()=>a.unsubscribe():a}function st(e,t,n){let a=n[t];const r=a===void 0;r&&(a={store:null,last_value:null,value:le(gt),unsubscribe:F},n[t]=a),(r||a.store!==e)&&(a.unsubscribe(),a.store=e??null,a.unsubscribe=Ne(e,a.value));const c=C(a.value);return c===gt?a.last_value:c}function Ne(e,t){return e==null?(O(t,void 0),F):Bt(e,n=>O(t,n))}function ot(e){Ve(()=>{let t;for(t in e)e[t].unsubscribe()})}function lt(e,t,n){return e.set(n),t}function Ve(e){yt(()=>()=>D(e))}const tt=[];function je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ae(e,t=F){let n=null;const a=new Set;function r(o){if(je(e,o)&&(e=o,n)){const d=!tt.length;for(const s of a)s[1](),tt.push(s,e);if(d){for(let s=0;s<tt.length;s+=2)tt[s][0](tt[s+1]);tt.length=0}}}function c(o){r(o(e))}function f(o,d=F){const s=[o,d];return a.add(s),a.size===1&&(n=t(r,c)||F),o(e),()=>{a.delete(s),a.size===0&&n&&(n(),n=null)}}return{set:r,update:c,subscribe:f}}function R(e){let t;return Bt(e,n=>t=n)(),t}const Y=["name","emailpass","passconfirm","congrats"],pt=new URLSearchParams(window.location.search).get("page"),Fe=pt&&Y.includes(pt)?pt:Y[0];function Wt(e){const t=Y.findIndex(r=>r===e),n=R(E).name?R(E).email?2:1:0;return Y[Math.min(t,n)]}const E=Ae({page:Fe,doTransition:!1,finished:!1});it("/register/get_session_state").then(e=>e.json()).then(e=>{E.update(t=>Object.assign(t,{name:e.username,email:e.email,password:e.password})),St(Wt(R(E).page),!1)});function St(e,t=!1){if(!Y.includes(e))throw new Error(`Unexpected value for newPage. Got '${e}' but expected one of ${Y.map(a=>"'"+a+"'").join(", ")}.`);E.update(a=>Object.assign(a,{page:e,doTransition:t}));const n=new URLSearchParams(window.location.search);n.set("page",e),history.pushState(R(E),"","?"+n.toString())}window.addEventListener("popstate",e=>{var a;if(R(E).finished)return;const t=((a=e==null?void 0:e.state)==null?void 0:a.page)??Y[0],n=Wt(t);if(t!==n){St(n,!1);return}E.update(r=>Object.assign(r,{page:t,doTransition:!1}))});var Ue=N('<div class="absolute w-screen h-screen bg-background-200 -z-10"></div> <div class="absolute w-screen h-screen flex items-center justify-center"><div class="absolute flex flex-col md:w-1/2 w-5/6 h-4/5 bg-background rounded-md p-4"><h1 class="shrink text-center font-serif text-dark text-4xl">Registration</h1> <!></div></div>',1);function ut(e,t){J(t,!0);const n={};ot(n);const a=()=>st(E,"$state_",n),r=500;let c,f=[];rt(()=>{for(const u of c.querySelectorAll("[data-transition-delay]")){if(!(u instanceof HTMLElement))throw new Error(`Only HTML elements can be transitions. Got ${u}`);f.push(u)}a().doTransition&&(f.forEach(u=>u.style.opacity="0"),me(()=>{for(const u of f){const _=Number.parseFloat(u.dataset.transitionDelay??"0");u.style.transitionDelay=`${_}ms`,u.style.transitionDuration=`${r}ms`,u.style.transitionProperty="opacity",u.style.opacity="1"}}),lt(E,D(a).doTransition=!1,D(a)))});function o(u){let _=0;for(const v of f){const h=Number.parseFloat(v.dataset.transitionDelay??"0");v.style.transitionDelay=`${h}ms`,v.style.transitionDuration=`${r}ms`,v.style.transitionProperty="opacity",v.style.opacity="0",h>_&&(_=h)}setTimeout(()=>St(u,!0),f.length>0?_+r:0)}var d=Ue(),s=V(d),g=i(i(s,!0)),m=P(g);at(m,u=>c=u,()=>c);var w=P(m),l=i(i(w,!0));ye(()=>t.card,u=>{u(l,{transitionpage:o})}),y(e,d),K()}var qe=N("<label> </label>"),Ge=N('<label><span class="bg-none relative"><!></span></label>'),Le=N("<div><!> <div><input> <!></div></div>");const Ut=["text","date","datetime-local","email","month","number","password","search","tel","time","url","week"];function Oe(e,t){J(t,!0);let n=W(t,"class",3,""),a=W(t,"statusclass",3,""),r=W(t,"outerclass",3,""),c=W(t,"wrapperclass",3,""),f=W(t,"labelclass",3,""),o=Ot(t,["$$slots","$$events","$$legacy","inpId","statusCodeNameMsg","class","statusclass","outerclass","wrapperclass","labelclass","label"]);if(o.type&&!Ut.includes(o.type))throw new Error(`Type of input is not allowed. Got '${o.type}''. Expected one of ${Ut.map(x=>"'"+x+"'").join(", ")}.`);let d=H("");const s=()=>C(d),g=x=>O(d,ct(x));let m=H(ct({result:-2})),w=H(!1),l=H(!1);function u(x,T){O(w,!T),T&&O(l,!C(l)),O(m,ct(x))}const _=x=>{const T=x.firstElementChild;if(!T||!(T instanceof HTMLElement))throw new Error("Text needs to be contained in a span");return x.style.width=`${T.offsetWidth+1}px`,{update:()=>{x.style.removeProperty("width"),x.style.width=`${T.offsetWidth+1}px`}}};let v;const h=()=>v.setCustomValidity(""),j=()=>{setTimeout(()=>v.focus())},b=x=>{if(!(x instanceof HTMLInputElement))throw new Error("Element needs to be an input");x.setCustomValidity("bad"),v=x};var p=Le(),S=P(p);z(S,()=>t.label,x=>{var T=qe(),L=P(T);B(()=>{nt(T,"for",t.inpId),et(T,`base-text-input-label ${f()??""}`),X(L,t.label)}),y(x,T)});var k=i(i(S,!0)),I=(x,T=F,L=F)=>{var Q=Ge();Ie(5,Q,()=>pe,()=>({duration:400,disable:C(w)}));var Ht=P(Q),Zt=P(Ht);z(Zt,L,vt=>{var mt=G(),Jt=V(mt);fe(Jt,L),y(vt,mt)}),B(()=>{et(Q,`base-text-input-status ${T()??""} ${a()??""}`),nt(Q,"for",t.inpId)}),ht(Q,(vt,mt)=>_(vt),L),y(x,Q)},M=P(k),U=()=>C(m).result=-2;let A;var q=i(i(M,!0));return xe(q,()=>C(l),x=>{var T=G(),L=V(T);I(L,()=>C(m).result===-1?"err text-red-500":C(m).result===1?"succ text-green-500 !w-5 text-xl !cursor-default":C(m).result===0?"pending text-stone-500":"",()=>C(m).result===1?'<ion-icon class="w-5" name="checkmark-outline"></ion-icon>':C(m).result===-1||C(m).result===0?t.statusCodeNameMsg(C(m).code??"").msg:""),y(x,T)}),B(()=>{et(p,`base-text-input-wrapper ${c()??""}`),et(k,`base-text-input-outer ${r()??""}`),A=Ct(M,A,{class:`base-text-input ${n()??""}`,type:o.type??"text",name:"name",id:t.inpId,disabled:C(m).result===0||C(m).result===1,oninput:U,...o},!0,"")}),_e(M,()=>C(d),x=>O(d,x)),ht(M,x=>b(x)),y(e,p),K({getValue:s,setValue:g,setValidState:u,setInputToValid:h,focus:j})}var De=N("<input>"),Re=N('<input class="border-2 border-stone-500 px-4 py-2 rounded-lg text-stone-500 font-bold cursor-pointer mt-6" type="submit" value="Submit">'),ze=N('<div class="text-red-500 text-center absolute bottom-0 translate-y-full text-balance"> </div>'),Be=N("<div><!> <!> <!> <!></div>");function Mt(e,t){J(t,!0);let n=W(t,"hiddeninputs",11,()=>[]),a=W(t,"formclass",3,""),r=W(t,"resubmitValidated",3,!0);const c=t.inputs.map(({name:b})=>b);if(new Set(c).size!==t.inputs.length)throw new Error(`All names must be unique. Got ${c}`);let f=!1,o;async function d(b){var k,I;if(f){f=!1;return}O(g,null),console.log(s),s.forEach(M=>M==null?void 0:M.setValidState({result:0,code:""},!1));const p=[],S=t.inputs.map(({validateFunc:M},U)=>M(s[U].getValue()).then(A=>{var q,x;A.result===-1?((q=s[U])==null||q.setValidState(A,!0),p.push(U)):(x=s[U])==null||x.setValidState({result:-2},!1)}));if(await Promise.all(S),p.length>0)(k=s.find((M,U)=>p.includes(U)))==null||k.focus();else{const M=s.reduce((A,q,x)=>({...A,[t.inputs[x].name]:q.getValue()}),{}),U=await t.submitFunc(M);if(U.result===-1){const A=[];for(const q of ge(U.code??"GER")){const{input:x,msg:T}=t.statusCodeNameMsg(q),L=t.inputs.findIndex(({name:Q})=>x===Q);L===-1?O(g,ct(T)):(s[L].setValidState({result:-1,code:T},!0),A.push(L))}(I=s.find((q,x)=>A.includes(x)))==null||I.focus(),s.forEach((q,x)=>!A.includes(x)&&q.setValidState({result:-2},!1))}else U.result===1&&(s.forEach(A=>A.setValidState({result:1},!1)),t.onsuccess&&t.onsuccess(),r()&&setTimeout(()=>{s.forEach(A=>A&&A.setInputToValid()),f=!0,o.click()}))}}let s=Array(t.inputs.length),g=H(null);const m=b=>{const p=b.querySelector("[type=submit]");if(!p)throw new Error("submitBtn snippter must have a button/input of type 'submit'");o=p};function w(b){const p=t.inputs.findIndex(S=>S.name===b);if(p===-1)throw new Error(`Name not found. Expected one of ${t.inputs.map(S=>"'"+S.name+"'").join(", ")}. Got '${b}'`);return s[p].getValue()}function l(b,p){const S=t.inputs.findIndex(k=>k.name===b);if(S===-1)throw new Error(`Name not found. Expected one of ${t.inputs.map(k=>"'"+k.name+"'").join(", ")}. Got '${b}'`);return s[S].setValue(p)}rt(()=>{function b(p){p.preventDefault(),d()}return document.addEventListener("submit",b),()=>document.removeEventListener("submit",b)});var u=Be(),_=P(u);Vt(_,65,n,jt,(b,p,S)=>{var k=De();let I;B(()=>I=Ct(k,I,{type:"hidden",...$(p)},!0,"")),y(b,k)});var v=i(i(_,!0));Vt(v,65,()=>t.inputs,jt,(b,p,S)=>{var k=G(),I=V(k);at(Oe(I,ve({get inpId(){return $(p).name},get label(){return $(p).label},get statusCodeNameMsg(){return t.statusCodeNameMsg},get statusclass(){return $(p).statusclass}},()=>$(p).inputAttrs)),(M,U)=>s[U]=M,M=>s==null?void 0:s[M],()=>[$(S)]),y(b,k)});var h=i(i(v,!0));z(h,()=>t.submitBtn,b=>{var p=G(),S=V(p);bt(()=>t.submitBtn,S),y(b,p)},b=>{var p=Re();at(p,S=>o=S,()=>o),y(b,p)});var j=i(i(h,!0));return z(j,()=>C(g),b=>{var p=ze(),S=P(p);B(()=>X(S,C(g))),y(b,p)}),B(()=>et(u,`relative max-w-full ${a()??""}`)),ht(u,b=>m(b)),y(e,u),K({getValue:w,setValue:l})}var We=N('<div class="my-1 flex justify-center"><a class="py-1 px-3 border-2 bg-rock-200 border-rock-800 text-dark font-bold text-lg rounded inline-flex items-center justify-center hover:bg-rock-300 active:bg-rock-400"><ion-icon class="mr-2 text-xl"></ion-icon> </a></div>',2),He=N('<button type="submit" class="snap-press border-2 border-rock-800 bg-rock-400 p-3 rounded relative flex items-center justify-end shadow-[inset_-7px_-7px] shadow-steel-200 group transition-[margin-right] hover:-mr-4 hover:bg-rock-500 hover:shadow-rock-500 active:mr-0 active:bg-rock-600 active:shadow-rock-600 h-14 mt-3 ml-auto sm:ml-2 sm:mt-0"><div class="h-1 w-6 bg-rock-800 rounded-xl group-hover:w-10 transition-[width] group-hover:bg-rock-950 group-active:w-6 group-active:bg-rock-950"></div> <div class="absolute -mr-1"><div class="rotate-45 h-1 w-4 bg-rock-800 mb-1.5 group-hover:bg-rock-950 group-active:bg-rock-950"></div> <div class="-rotate-45 h-1 w-4 bg-rock-800 group-hover:bg-rock-950 group-active:bg-rock-950"></div></div></button>'),Ze=(e,t)=>t.transitionpage("emailpass"),Je=N('<button type="button" data-transition-delay="100" class="absolute bottom-0 right-0 px-4 py-2 flex items-center text-lg hover:underline active:no-underline text-text active:text-text-600">Go forward<ion-icon name="arrow-forward" class="text-xl ml-1"></ion-icon></button>',2),Ke=N('<h2 class="text-center shrink text-dark" data-transition-delay="0">Already have an account? <a class="text-blue-400 underline hover:no-underline">Log in</a>.</h2> <div class="grow flex items-center justify-center relative" data-transition-delay="250"><div class="absolute w-full h-full bg-steel-100 z-0" style="clip-path: polygon(0 75%, 100% 0, 100% 31%, 0% 100%);"></div> <div class="flex z-10"><!></div></div> <div class="text-center" data-transition-delay="500"><h2 class="text-2xl mb-3">Or, sign up with...</h2> <div><!> <!> <!></div></div> <!>',1);async function Qe(e){const t=e.trim();return t.length===0?{result:-1,code:"UNM"}:t.length<3?{result:-1,code:"UNS"}:{result:1}}async function Xe({name:e}){if(typeof e>"u")return{result:-1,code:"UNM"};if(e===R(E).name)return{result:1};let t;try{R(E).name||await it("/register/set_loginmode",{method:"POST",body:"password",headers:{"Content-Type":"text/plain"}}),t=await it("/register/add_username",{method:"POST",body:e,headers:{"Content-Type":"text/plain"}})}catch{return{result:-1}}const n=await t.json();return{result:n.result?1:-1,code:n.code}}function Ye(e,t){J(t,!0);const n={};ot(n);const a=()=>st(E,"$state_",n);var r=(I,M=F,U=F,A=F)=>{var q=We(),x=P(q),T=P(x),L=i(T,!0);B(()=>{nt(x,"href",urlRoot+A()),be(T,"name",U()),X(L,M())}),y(I,q)};kt(()=>{c.setValue("name",a().name??"")}),rt(()=>{Et(document.querySelector(".snap-press"),["margin-right","width"])});let c,f=H(!1);function o(){lt(E,D(a).name=c.getValue("name"),D(a)),O(f,!0),t.transitionpage("emailpass")}var d=Ke(),s=V(d),g=i(P(s));nt(g,"href",urlRoot+"login");var m=i(i(s,!0)),w=P(m),l=i(i(w,!0)),u=P(l);{var _=I=>{var M=He();y(I,M)};at(Mt(u,{inputs:[{name:"name",inputAttrs:{placeholder:"your-username",class:"w-64 shadow-[inset_-7px_-7px_var(--steel-100)] focus:shadow-[inset_-7px_-7px_var(--steel-100),0_0_0_3px_var(--background),0_0_0_7px_var(--steel-200)] focus:ring-0 transition-shadow duration-100",autocomplete:"name"},statusclass:"bg-steel-100 -mt-[9px]",validateFunc:Qe}],statusCodeNameMsg:Pt,submitFunc:Xe,formclass:"block sm:flex",onsuccess:o,submitBtn:_}),I=>c=I,()=>c)}var v=i(i(m,!0)),h=P(v),j=i(i(h,!0)),b=P(j);r(b,()=>"Google",()=>"logo-google",()=>"register/oauth/google");var p=i(i(b,!0));r(p,()=>"GitHub",()=>"logo-github",()=>"register/oauth/github");var S=i(i(p,!0));r(S,()=>"LinkedIn",()=>"logo-linkedin",()=>"register/oauth/linkedin");var k=i(i(v,!0));z(k,()=>a().name&&!C(f),I=>{var M=Je();M.__click=[Ze,t],y(I,M)}),y(e,d),K()}wt(["click"]);var $e=N('<div class="flex justify-center mt-8 h-14"><button type="submit" class="snap-press border-2 border-rock-800 bg-rock-400 ml-2 px-6 py-3 rounded relative flex items-center justify-end shadow-[inset_-7px_-7px] shadow-steel-200 group transition-[margin-right] hover:-mr-4 hover:bg-rock-500 hover:shadow-rock-500 active:mr-0 active:bg-rock-600 active:shadow-rock-600"><div class="h-1 w-6 bg-rock-800 rounded-xl group-hover:w-10 transition-[width] group-hover:bg-rock-950 group-active:w-6 group-active:bg-rock-950"></div> <div class="absolute -mr-1"><div class="rotate-45 h-1 w-4 bg-rock-800 mb-1.5 group-hover:bg-rock-950 group-active:bg-rock-950"></div> <div class="-rotate-45 h-1 w-4 bg-rock-800 group-hover:bg-rock-950 group-active:bg-rock-950"></div></div></button></div>'),ta=(e,t)=>t.transitionpage("name"),ea=(e,t)=>t.transitionpage("passconfirm"),aa=N('<button type="button" data-transition-delay="100" class="absolute bottom-0 right-0 px-4 py-2 flex items-center text-lg hover:underline active:no-underline text-text active:text-text-600">Go forward<ion-icon name="arrow-forward" class="text-xl ml-1"></ion-icon></button>',2),na=N('<h2 class="text-2xl ml-10 mt-6 text-steel-500 break-words" data-transition-delay="0"> </h2> <div class="grow flex items-center justify-center relative" data-transition-delay="100"><div class="absolute w-full h-full bg-steel-100 z-0" style="clip-path: polygon(6% 0, 37% 0, 95% 94%, 91% 100%, 65% 100%, 3% 4%); background: linear-gradient(162deg, var(--background) 0%, var(--background) 10%, var(--steel-100) 50%, var(--steel-100) 100%);"></div> <!></div> <button type="button" data-transition-delay="100" class="absolute bottom-0 left-0 px-4 py-2 flex items-center text-lg hover:underline active:no-underline text-text active:text-text-600"><ion-icon name="arrow-back-outline" class="text-xl mr-1"></ion-icon>Go back</button> <!>',3);async function ra(e){const t=e.trim().toLowerCase();return t.length===0?{result:-1,code:"EMM"}:t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?{result:1}:{result:-1,code:"EMI"}}async function sa(e){return e.length===0?{result:-1,code:"PWM"}:{result:1}}async function oa({email:e,password:t}){if(typeof e>"u"||typeof t>"u")return{result:-1,code:"EMM"};if(e===R(E).email&&t===R(E).password)return{result:1};let n;try{n=await it("/register/add_email_password",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}})}catch{return{result:-1}}const a=await n.json();return{result:a.result?1:-1,code:a.code}}function ia(e,t){J(t,!0);const n={};ot(n);const a=()=>st(E,"$state_",n);let r,c=H(!1);function f(){lt(E,D(a).email=r.getValue("email"),D(a)),lt(E,D(a).password=r.getValue("password"),D(a)),O(c,!0),t.transitionpage("passconfirm")}kt(()=>{r.setValue("email",a().email??"")}),rt(()=>{Et(document.querySelector(".snap-press"),["margin-right","width"])});var o=na(),d=V(o),s=P(d),g=i(i(d,!0)),m=P(g),w=i(i(m,!0));{var l=v=>{var h=$e();y(v,h)};at(Mt(w,{inputs:[{name:"email",inputAttrs:{placeholder:"example@domain.reg",class:"w-72 text-base md:w-72 "+_t,wrapperclass:"mb-5",labelclass:"text-base ",type:"email",autocomplete:"email"},label:"Email:",validateFunc:ra,statusclass:"bg-steel-100 -mt-[9px]"},{name:"password",inputAttrs:{placeholder:"password",class:"w-72 text-base md:w-72 "+_t,labelclass:"text-base ",type:"password",autocomplete:"new-password"},label:"Password:",validateFunc:sa,statusclass:"bg-steel-100 -mt-[9px]"}],statusCodeNameMsg:Pt,submitFunc:oa,onsuccess:f,resubmitValidated:!1,submitBtn:l}),v=>r=v,()=>r)}var u=i(i(g,!0));u.__click=[ta,t];var _=i(i(u,!0));z(_,()=>a().email&&!C(c),v=>{var h=aa();h.__click=[ea,t],y(v,h)}),B(()=>X(s,`Hello, ${(a().name||"anonymous")??""}!`)),y(e,o),K()}wt(["click"]);var la=N("<span><!></span> <!>",1);function ua(e,t){J(t,!0);let n=W(t,"tag",3,"div"),a=Ot(t,["$$slots","$$events","$$legacy","tag","spanProps","spanContent","afterSpanContent"]),r,c=H(null),f=H(null);kt(()=>{!C(c)||!C(f)||(r.style.paddingLeft=`${(C(c)-C(f))/2}px`)});var o=G(),d=V(o);ke(d,n,!1,(s,g)=>{at(s,h=>r=h,()=>r);let m;B(()=>m=he(s,m,{...a},"")),At(s,"clientWidth",h=>O(c,h));var w=la(),l=V(w);let u;var _=P(l);bt(()=>t.spanContent,_);var v=i(i(l,!0));z(v,()=>t.afterSpanContent,h=>{var j=G(),b=V(j);bt(()=>t.afterSpanContent,b),y(h,j)}),B(()=>u=Ct(l,u,{...t.spanProps},!0,"")),At(l,"offsetWidth",h=>O(f,h)),y(g,w)}),y(e,o),K()}var ca=N(' <span class="text-sm inline-block -translate-y-0.5"> </span>',1),da=N("<br>Finally,<br>Confirm password:",1),fa=N('<input class="snap-style shadow-[inset_5px_5px_var(--background)] border-2 border-stone-500 px-4 py-2 rounded-lg text-stone-500 font-bold cursor-pointer mt-6 transition-all hover:px-8 hover:ring-4 ring-stone-300 active:px-4 hover:bg-opacity-25 hover:bg-stone-400 active:bg-opacity-40 active:bg-stone-600 active:shadow-none active:text-stone-700" type="submit" value="Finish">'),va=(e,t)=>t.transitionpage("emailpass"),ma=N('<!> <div class="grow flex items-center justify-center relative" data-transition-delay="100"><div class="absolute w-full h-full bg-steel-100 z-0" style="clip-path: polygon(9% 25%, 100% 59%, 100% 80%, 87% 80%, 0 46%, 0 25%); background: linear-gradient(162deg, var(--background) 0%, var(--background) 10%, var(--steel-100) 50%, var(--steel-100) 100%);"></div> <!></div> <button type="button" data-transition-delay="100" class="absolute bottom-0 left-0 px-4 py-2 flex items-center text-lg hover:underline active:no-underline text-text active:text-text-600"><ion-icon name="arrow-back-outline" class="text-xl mr-1"></ion-icon>Go back</button>',3);async function pa(e){if(!e)return{result:-1,code:"CPM"};const t=R(E).password;return e!==t?{result:-1,code:"PDM"}:{result:1}}async function ga(){let e;try{e=await it("/register/finish",{method:"POST"})}catch{return{result:-1}}const t=await e.json();return{result:t.result?1:-1,code:t.code}}function ba(e,t){J(t,!0);const n={};ot(n);const a=()=>st(E,"$state_",n);function r(){lt(E,D(a).finished=!0,D(a)),t.transitionpage("congrats")}rt(()=>{Et(document.querySelector(".snap-style"),["padding"])});var c=ma(),f=V(c);{var o=_=>{var v=ca(),h=V(v),j=i(h),b=P(j);B(()=>{X(h,`${(a().name||"martinm07")??""} `),X(b,`<${(a().email||"martin.molnar07@gmail.com")??""}>`)}),y(_,v)},d=_=>{var v=da();y(_,v)};ua(f,{tag:"h2",class:"text-lg mt-4 text-steel-500","data-transition-delay":"0",spanContent:o,afterSpanContent:d})}var s=i(i(f,!0)),g=P(s),m=i(i(g,!0)),w=ue(()=>[{type:"text",class:"hidden",name:"name",value:R(E).name,autocomplete:"name"},{type:"email",class:"hidden",name:"email",value:R(E).email,autocomplete:"email"}]);{var l=_=>{var v=fa();y(_,v)};Mt(m,{inputs:[{name:"confirmpass",inputAttrs:{type:"password",class:_t,autocomplete:"new-password"},label:"Repeat Password:",validateFunc:pa,statusclass:"bg-steel-100 -mt-[9px]"}],get hiddeninputs(){return C(w)},statusCodeNameMsg:Pt,submitFunc:ga,onsuccess:r,formclass:"text-center",submitBtn:l})}var u=i(i(s,!0));u.__click=[va,t],y(e,c),K()}wt(["click"]);const ha="/static/auth/img/WelcomeSign-C88G09pb.png",qt="/static/auth/ttf/IndieFlower-Regular-BeflUZG4.ttf";var _a=N(`<div class="grow flex flex-col justify-center" data-transition-delay="500"><img class="h-fit" alt="Congratulations!"> <canvas id="name"> </canvas></div> <div class="mb-5 px-5 text-text" data-transition-delay="1500">We have sent an email to your address. Open it within a week and click the
  link to verify your account. Thank you!</div> <a data-transition-delay="1500" class="text-right text-sm text-stone-700 underline w-1/2 ml-auto text-balance hover:no-underline">Prevent this account getting stranded by adding recovery options</a> <div id="load" class="svelte-78dhtj"></div>`,1);function xa(e,t){J(t,!0);const n={};ot(n);const a=()=>st(E,"$state_",n);rt(()=>{console.log(qt),new FontFace("Font name",`url(${qt})`).load().then(w=>{document.fonts.add(w);const l=document.getElementById("name"),u=l==null?void 0:l.getContext("2d");if(!u)return;l.width*=window.devicePixelRatio;const _=R(E).name||"anonymous",v="32px 'Font name'",h=-6*Math.PI/180;u.font=v;const j=u.measureText(_),b=Math.abs(Math.sin(h))*j.width/2+Math.cos(h)*j.actualBoundingBoxAscent,p=Math.abs(Math.sin(h))*j.width/2+Math.cos(h)*j.actualBoundingBoxDescent;l.height=Math.ceil(b+p),u.font=v,u.translate(l.width/2,l.height-p),u.rotate(h),u.fillText(_,-j.width/2,0)})});var r=_a(),c=V(r),f=P(c);nt(f,"src",ha);var o=i(i(f,!0));et(o,"");var d=P(o),s=i(i(c,!0)),g=i(i(s,!0));nt(g,"href",urlRoot+"account/recovery"),B(()=>X(d,a().name)),y(e,r),K()}var ya=N('<form method="POST" novalidate><!></form>');function Pt(e){switch(e){case"GER":return{input:null,msg:"An unexpected error has occured. Please try again later."};case"UNM":return{input:"name",msg:"Username is required"};case"UNS":return{input:"name",msg:"Username must be more<br />than 2 characters"};case"UNT":return{input:"name",msg:"Username is already taken"};case"UNP":return{input:"name",msg:"Username was detected as profane"};case"EMM":return{input:"email",msg:"Email is required"};case"EMI":return{input:"email",msg:"Invalid email"};case"EMT":return{input:"email",msg:"Email is already taken"};case"PWM":return{input:"password",msg:"Password is required"};case"CPM":return{input:"confirmpass",msg:"Password is required"};case"PDM":return{input:"confirmpass",msg:"Passwords don't match"};default:return{input:null,msg:e}}}const _t="shadow-[inset_-7px_-7px_var(--steel-100)] focus:shadow-[inset_-7px_-7px_var(--steel-100),0_0_0_3px_var(--background),0_0_0_7px_var(--steel-200)] focus:ring-0 transition-shadow duration-100";function wa(e,t){J(t,!0);const n={};ot(n);const a=()=>st(E,"$state_",n);var r=G(),c=V(r);z(c,()=>a().page!=="congrats",f=>{var o=ya(),d=P(o);z(d,()=>a().page==="name",s=>{var g=G(),m=V(g);ut(m,{card:Ye}),y(s,g)},s=>{var g=G(),m=V(g);z(m,()=>a().page==="emailpass",w=>{var l=G(),u=V(l);ut(u,{card:ia}),y(w,l)},w=>{var l=G(),u=V(l);z(u,()=>a().page==="passconfirm",_=>{var v=G(),h=V(v);ut(h,{card:ba}),y(_,v)},null,!0),y(w,l)},!0),y(s,g)}),y(f,o)},f=>{var o=G(),d=V(o);z(d,()=>a().page==="congrats",s=>{var g=G(),m=V(g);ut(m,{card:xa}),y(s,g)},null,!0),y(f,o)}),y(e,r),K()}ce(wa,{target:document.getElementById("app")});
